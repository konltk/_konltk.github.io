+++
title="파이썬 배포 할 때 파일을 포함하는 방법"
categories="extend-python"
tags=["python", "배포"]
+++
## 파이썬 배포 할 때 파일을 포함하는 방법
자신이 짠 파이썬 코드를 배포를 하고 싶을 때는 `distutiles.core`모듈을 사용하여서 배포가 가능한 형태로 만들 수가 있다.
`disturils.code` 모듈의 `setup`함수를 사용하여서 배포할 패키지를 구성할 수 있다.
`setup`함수에서 여러 구성요소는 [python docs 2.7](https://docs.python.org/2/distutils/apiref.html)에서 확인할 수 있다.

여기서 `data_files`옵션을 이용하여서 파일도 포함하여 배포하는것을 볼 것이다.

	setup.py
	src/
	____data/
	________data1.dat
    ________data2.dat
    ________data3.dat

위와 같이 파일 구조를 가지고 있는다면 `setup`함수 내에서 `data_files1`옵션을 아래와 같이 사용할 수 있다.
```python
setup(
name="cho"
...
data_files=[("data", ["src/data/data1.dat", "src/data/data2.dat", "src/data/data3.dat"])]
)#end setup
```
`python3 setup.py install` 명령어를 실행 후 `/usr/local/`을 확인하면 `data`폴더가 생성되어서 파일복사가 잘 이뤄진것을 볼 수 있다.

파일 복사의 위치는 순수 python은 `sys.prefix`, 확장 모듈을 포함하는 패키지의 경우는 `sys.exec_prefix`이다. [python doc](https://docs.python.org/2/distutils/setupscript.html)

## 파일안의 모든 파일
폴더안의 모든 파일을 넘기고 싶다면 아래 코드와 같이 `glob`모듈을 사용하여서 파일 리스트를 사용하면 된다.

```python
import glob
def find_data_files(srcdir):
	temp = []
    for f in glob.iglob(srcdir, recursive=True):
    	temp.append(f)
    return temp
```
```python
setup(
name="cho"
...
data_files=[("data", find_data_files("/home/cho/sample/src/data/")]
)#end setup
```